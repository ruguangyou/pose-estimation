%YAML:1.0
# dataset: /home/ruguang/docker-CFSD/cfsd/2019/kitti/2011_09_26/2011_09_26_drive_0002_extract/
dataset: /home/ruguang/docker-CFSD/cfsd/2019/kitti/2011_09_26/2011_09_26_drive_0005_extract/

################################################################################
##### Sensor settings #####
# Camera
imageWidth: 1392
imageHeight: 512
cameraFrequency: 10
# Standard deviation of pixel-level measurement
stdX: 0.5
stdY: 0.5

# Left camera intrinsics
# Cam 2
camLeft: !!opencv-matrix
    rows: 3
    cols: 3
    dt: d
    data: [ 9.597910e+02, 0.000000e+00, 6.960217e+02, 0.000000e+00, 9.569251e+02, 2.241806e+02, 0.000000e+00, 0.000000e+00, 1.000000e+00 ]
distLeft: !!opencv-matrix
    rows: 5
    cols: 1
    dt: d
    data: [ -3.691481e-01, 1.968681e-01, 1.353473e-03, 5.677587e-04, -6.770705e-02 ]

# Right camera intrinsics
# Cam 0
camRight: !!opencv-matrix
    rows: 3
    cols: 3
    dt: d
    data: [ 9.842439e+02, 0.000000e+00, 6.900000e+02, 0.000000e+00, 9.808141e+02, 2.331966e+02, 0.000000e+00, 0.000000e+00, 1.000000e+00 ]
distRight: !!opencv-matrix
    rows: 5
    cols: 1
    dt: d
    data: [ -3.728755e-01, 2.037299e-01, 2.219027e-03, 1.383707e-03, -7.233722e-02 ]

# Camera extrinsics
# Cam2 -> Cam0
rotationLeftToRight: !!opencv-matrix
    rows: 3
    cols: 1
    dt: d
    data: [ -0.00340187, 0.00456143, -0.00525976 ]
translationLeftToRight: !!opencv-matrix
    rows: 3
    cols: 1
    dt: d
    data: [ -0.0595781, 1.5018e-05, -0.00230501 ]

# IMU paramteres
## IMU coordinate system
##         z |  / x
##           | /
##    y ------
samplingRate: 100 # [Hz]
# (cfsd) IMU noise and bias factor
accNoise: 0.000057 # [g*sqrt(s)] accelerometer measurement noise density, 57 micro-g/sqrt(Hz) from "Ellipse_Series_Leaflet.pdf"
gyrNoise: 4.3633e-5 # [rad/sqrt(s)] gyroscope measurement noise density, 0.15 degree/sqrt(hr)
# (kitti) otxs RT3003 (https://support.oxts.com/hc/en-us/articles/115001155865-RT3000-Online-manual, rt_manual.pdf, p.23)
accBias: 0.000005 # [g] accelerometer bias random walk noise, 5 micro-g
gyrBias: 0.0001745 # [rad/s] gyroscope bias random walk noise, 0.01 degree/s

# Camera (left) and imu extrinsics
rotationImuToCamera: !!opencv-matrix
    rows: 3
    cols: 3
    dt: d
    data: [ 0.0036985, -0.999805, 0.0193992, 0.00940763, -0.0193637, -0.999768, 0.999949, 0.00388015, 0.00933418 ]
translationImuToCamera: !!opencv-matrix
    rows: 3
    cols: 1
    dt: d
    data: [ -0.268429, 0.713849, -1.08628 ]

################################################################################
##### Feature detection settings #####
# Use ORB of OpenCV or ORB_SLAM2
cvORB: 0 # default: not use OpenCV ORB

# ORB feature detector parameters
numberOfFeatures: 1000
scaleFactor: 1.2
levelPyramid: 8

# (OpenCV) ORB Detector
edgeThreshold: 31
scoreType: 1 # 0 is ORB::HARRIS_SCORE, 1 is ORB::FAST_SCORE
patchSize: 31
fastThreshold: 20
# For OpenCV ORB, detect in several grids to make the distribution of keypoints more evenly
gridRow: 1
gridCol: 1

# (ORB_SLAM2) ORB Extractor: Fast threshold
# Image is divided in a grid. At each cell FAST are extracted imposing a minimum response.
# Firstly we impose iniThFAST. If no corners are detected we impose a lower value minThFAST
# You can lower these values if your images have low contrast			
iniThFAST: 20
minThFAST: 7

# Feature matching parameters
matchRatio: 2    # the distance of a good match should be smaller than minDist*matchRatio
minMatchDist: 30.0 # another number for selecting good matches, from experience
maxVerticalPixelDist: 0.1 # selecting good matching by the vertical coordinates since image have been rectified
maxFeatureAge: 8  # Max age of a feature
maxDepth: 10 # Max depth or distance w.r.t camera

################################################################################
##### Tracking settings #####
#max_num_lost: 10
#min_inliers: 10

# Keyframe selection
keyframe_rotation: 0.2
keyframe_translation: 0.1
# nearPointThres:
maxImuTime: 4

# Reinitialization if bias is corrupted
maxGyrBias: 0.1
maxAccBias: 0.6

# SfM frame selection
sfmRotation: 0
sfmTranslation: 0

################################################################################
##### Optimization settings #####
max_num_iterations: 20 # default: 50
max_solver_time_in_seconds: 10 # default: 1e6
num_threads: 4 # default: 1
check_gradients: 0

# Gravity magnitude for initial accelerometer correction.
gravity: 9.81734 # [m/s^2] gravitational acceleration (might need slightly modification in case of different location)

# Prior covariance factor
priorFactor: 1e-5

################################################################################
##### Viewer settings #####
viewScale: 1
pointSize: 4
landmarkSize: 2
cameraSize: 0.08
cameraLineWidth: 3
lineWidth: 2
viewpointX: -0.1
viewpointY: 0
viewpointZ: 400
viewpointF: 2000
background: 0 # 0-black, 1-white
## world frame
##       z |  / x
##         | /
##  y ------
# set the up direction as AxisZ
axisDirection: 6 # 0-AxisNone, 1-AxisNegX, 2-AxisX, 3-AxisNegY, 4-AxisY, 5-AxisNegZ, 6-AxisZ